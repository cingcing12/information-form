<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - Admin</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }

      .container {
        max-width: 500px;
        width: 100%;
        border: 1px solid white;
        padding: 40px;
        border-radius: 20px;
        margin-inline: 20px;
      }
    </style>
  </head>
  <body data-bs-theme="dark">
    <div class="container">
      <h2 class="h2 text-center mb-3">Login</h2>
      <form>
        <div class="form-floating mb-3">
          <input
            type="email"
            class="form-control"
            id="floatingInput"
            placeholder="name@example.com"
            required
          />
          <label for="floatingInput">Email address</label>
        </div>
        <div class="form-floating">
          <input
            type="password"
            class="form-control"
            id="floatingPassword"
            placeholder="Password"
            required
          />
          <label for="floatingPassword">Password</label>
        </div>

        <div class="d-flex justify-content-end">
          <button type="submit" class="btn btn-primary mt-3">Login</button>
        </div>
      </form>
    </div>

    <script>
      document.querySelector("form").addEventListener("submit", async (e) => {
        e.preventDefault();
        try {
          const email = document.querySelector("#floatingInput").value;
          const password = document.querySelector("#floatingPassword").value;

          const res = await fetch("https://information-form-2.onrender.com/login", {
            method: "POST",
            headers: { "Content-type": "application/json" },
            body: JSON.stringify({ email, password }),
          });
          const message = await res.json();
          if (res.ok) {
            Swal.fire({
              title: "Successfully!",
              text: message,
              icon: "success",
            }).then(() => {
              localStorage.setItem("checkLogin", true);
              window.location.href = "https://information-form-2.onrender.com/views.html";
            });
          } else {
            Swal.fire({
              icon: "error",
              title: "Oops...",
              text: message.err,
            });
          }
        } catch (err) {
          Swal.fire({
            icon: "error",
            title: "Oops...",
            text: err.message,
          });
        }
      });
    </script>
  </body>
</html>
